{
	"app-id": "net.pioneerspacesim.Pioneer",
	"runtime": "org.freedesktop.Platform",
	"runtime-version": "25.08",
	"sdk": "org.freedesktop.Sdk",
	"command": "pioneer",
	"finish-args": [
		"--share=ipc",
		"--socket=wayland",
		"--socket=fallback-x11",
		"--socket=pulseaudio",
		"--device=all",
		"--persist=.pioneer"
	],
	"build-options" : {
		"cflags": "-O3 -g",
		"cxxflags": "-O3 -g"
	},
	"cleanup": [
		"/include",
		"/lib/pkgconfig",
		"/lib/cmake",
		"*.a",
		"*.la"
	],
	"modules": [
		{
			"name": "sigcpp",
			"config-opts": [
				"--disable-documentation"
			],
			"cleanup": [
				"/lib/sigc++-2.0"
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://download.gnome.org/sources/libsigc++/2.10/libsigc++-2.10.0.tar.xz",
					"sha256": "f843d6346260bfcb4426259e314512b99e296e8ca241d771d21ac64f28298d81"
				}
			]
		},
		{
			"name": "assimp",
			"buildsystem": "cmake-ninja",
			"config-opts": [
				"-DASSIMP_BUILD_ALL_IMPORTERS_BY_DEFAULT:BOOL=NO",
				"-DASSIMP_BUILD_ALL_EXPORTERS_BY_DEFAULT:BOOL=NO",
				"-DASSIMP_BUILD_COLLADA_IMPORTER:BOOL=YES",
				"-DASSIMP_BUILD_OBJ_IMPORTER:BOOL=YES",
				"-DASSIMP_BUILD_3MF_IMPORTER:BOOL=YES",
				"-DASSIMP_BUILD_ASSIMP_TOOLS:BOOL=NO",
				"-DASSIMP_BUILD_TESTS:BOOL=NO"
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://github.com/assimp/assimp/archive/v5.2.5.tar.gz",
					"sha256": "b5219e63ae31d895d60d98001ee5bb809fb2c7b2de1e7f78ceeb600063641e1a"
				}
			]
		},
		"shared-modules/glu/glu-9.json",
		"shared-modules/glew/glew.json",
		"shared-modules/SDL2/SDL2_image.json",
		{
			"name": "pioneer",
			"buildsystem": "cmake-ninja",
			"config-opts": [
				"-DUSE_SSE42:BOOL=NO",
				"-DUSE_SYSTEM_LIBGLEW:BOOL=YES"
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://github.com/pioneerspacesim/pioneer/archive/refs/tags/20250501.tar.gz",
					"sha256": "959902d98a79536bd44f25bd7b29e48da94aeac597228776b0f91635877f362e"
				},
				{
					"type": "patch",
					"path": "prefer-wayland.patch"
				},
				{ 
					"type": "file", 
					"path": "pioneer.metainfo.xml" 
				}
			],
			"build-commands": [
				"ninja build-data"
			],
			"post-install": [
				"install -Dm644 pioneer.metainfo.xml /app/share/metainfo/net.pioneerspacesim.Pioneer.metainfo.xml"
			]
		}
	]
}
